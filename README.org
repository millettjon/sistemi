* SCRATCH

TESTS TO AUTOMATE
- test adding ral shelf
- test adding valchromat shelf
- test adding valchromat oiled shelf
- test editing a cart item
? how to automate?
  ? phantom js?


- cart - update button (after editing) is not translated
- cart - use spreadsheet to price shelves
- cart - remove copy button
- cart - ? should recently added items be listed last instead of first?
- cart - add packaging to pricing
- cart - add margin to pricing
- cart - ? should it show VAT?
- shelf - add background button
- bookcase - add add to cart button
- factor common color picker code out of shelf and bookcase pages.
- rename shelving to bookcase

- sistemi.form is really just validators
  ? how will client side validation work with pedestal/clojurescript?
- www.form is for
  - rendering html form fields
  - reading/parsing html form fields (goes away if we use pedestal)
  - validating http get/post params

- don't use foreman
- fix server deployment
  - integrate with bootstrap
  - start from upstart
  - run as a dedicated user
  - save logs in var/log
  - cronjob to roll logs
? how is run_level passed?
  ? set by ansible in etc/environment?

? where to store test credentials for automated testing of payment gateways?
  - gateway classes should not be coupled to app conf

- how to pass environment vars if not using foreman
- how to pass gpp password if not using heroku
  - hardcode somewhere where:
    - only root has access
    - daemon can set into environment before dropping privileges
    - doesn't get backed up (at least in unencrypted form)

? where to store stuff to prevent accidental unencrypted backup?
  - upstart - use script stanza to load (use JOB/INSTANCE env vars)
      - http://upstart.ubuntu.com/cookbook/
      - http://upstart.ubuntu.com/cookbook/#standard-environment-variables
  - backup program should ignore
  - use s attribute for secure deletion
  - ansible should install/manage
  - /root/
      secure/
        sm-www/           # dir per service
          environment     # environment file to source
        tarsnap.key

so, from production, runs from upstart
? how does it start in local dev environment?
  - lein run?
    - w/ dev profile?
    ? can it provide local overrides?
   ? works case, wrapper for leingingen

- lein wrapper that sets environment
    bin/start sources etc/environment

- if we use configure,
  ? how to run in dev mode? as a service versus dev?
    configure-dev
    configure

- shopping cart - handle multiple color schemes
- pricing - price directory from spreadsheets
  + Factory (from spreadsheet)
  + Packaging
  + Shipping
  + Margin
  + VAT
- shipping - get shipping estimates from UPS (Dave)
  ? do they have address validation?
- pricing - spreadsheet for packaging price
- pricing - what is our target margin?
- pricing - how much is VAT and when do we have to collect it?
- payment - use braintree, stripe, and spreedly for the following
  - create and capture a payment
  - pre-authorize a payment
  - capture a pre-authorized payment
- paypal - delete all references
- old pricing - remove old pricing and complex modeling
- merge keypass shared w/ sysadmin (sistemi)

- refactor, load translations of maps anywhere
  - e.g., valchromat translations should be in color.valchromat
  ? can an arbitrary map be used?

* BUGS
** TODO website - on review page when clicking edit specifications, on return to design page, cutout selection is lost
** TODO france - fix formatting of currencies french locale e.g.,: "1 234,56â‚¬"
Note: Bux formats based on currency, but not locale.
? Use tower library?
** TODO france - validate addresses
* SINGLE PAGE APP
- advantages
  - turtles all the way down
  - closure compiler optimizations across everything
  - should work for html5 phone app
  - better ui testing
  - no page reloads
  - better interactivity (e.g., multiple simultaneous sources)
  - seamless use of web workers
  - infinite scrolling
  - server is more scalable
  - server is stateless?
  - allows different backends
  - backend becomes simpler (no ui)
- disadvantages
  - bleeding edge - changes on the way
  - fewer libraries for cljs than clj
  - time needed to rewrite
    ? maybe not so bad if i can hide in a cave for a week?
- steps
  ? how to manage url in location bar?
    window.history.pushState and replaceState
    https://developer.mozilla.org/en-US/docs/Web/Guide/API/DOM/Manipulating_the_browser_history
    http://caniuse.com/#feat=history
      - may be issues with safari and android
    http://squirrel.pl/blog/2013/05/30/client-side-routing-with-pedestal/
      - uses google closure history from clojurescript w/ pedestal integration
  ? how to manage form data?
  ? how to decompose cljs into modules?
    - color wheel
    - product design pages
  ? how to track user interaction?
  ? how to handle localization?

? how does emacs integration work?
? how do you get a browser repl?
? how does automated testing work?
? do we care about localized urls?

** Notes from Tutorial
https://github.com/pedestal/app-tutorial/wiki
(start)   ; starts dev instance
index page is at http://localhost:3000
hover in lower right to show control panel
  - control panel is configured on config/config.edn

Contro lPanel
  Fresh - load a page with a cljs repl (run cljs-repl first)
    http://localhost:3000/fresh.html

- data ui - dump view of rendering data produced by application
- each message has a type and a topic
  - type and possibly topic are used for dispatch to the transform fn
  - topic defines the subtree in the state map to apply the message to
- dataflow - routing table that hooks together transform fns
  - routing entries have the form: type topic transform-fn
  - use [:*] and [:**] to glob on one or more topic segments
- namespaces w/ ^:shared metadata will be compiled to both clj and cljs
  - they are limited to the compatible subset (until clojure 1.6 feature expressions)
- emitters process delta's to emit output
- deltas can be
  - :node-create
  - :node-destroy
  - :value
  - :attr
  - :transform-enable
  - :transform-disable
renderer - code which receives rendering deltas and effects appropriate changes to the UI.
Activity - the activity protocol is used for things which can stop and start.
effect fn - takes its inputs as arguments and returns a vector of messages to be sent out of the application
derived fn - fn that uses more than one value as input
html (tags recognized by development server)
  - _within
    - matches top level tag by it's id w/ that of container
  - _include
templates
  - use attributes to define a template
    - template    ; defines template to use
    - field       ; set node attributes from map
    - content     ; set node content from map

* TASKS
** DONE blog - setup wordpress
- keep languages consistent
- how to install wordpress
? can the tracking be integrated between the blog and the site?
? how do the analytics work?
? is ghost an option?
- integration options
  ? iframe?
  ? enlive transformation?
  ? custom client e.g., REST?
? are blog pages amenable to caching?
? what features do we want?
  ? for administrators?
  ? for readers?
    ? are comments supported?
    ? share icons?
? what plugins does Antoine use?

Seems like iframe tracking (even cross domain) is possible:
https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingSite#trackingIFrames

Features
? How do we create content?
? How do we display content?
? How do we integrate with social networks?
  - let authors publish
  - let readers share
? How do we link into content?

memory footprint:
  ghost (https://ghost.org/forum/installation/563-ghost-memory-usage)
    70MB/blog
    4 blogs in 512MB docker vps

ghost is faster

Static html file: av 125 RPS
Wordpress:        av 30 RPS
Ghost:            av 68 RPS

nginx:            3 procs @ 6Mb
php5-fpm:         6 procs @ 84Mb (11 x 14Mb procs during test)
nodejs:           2 procs @ 67Mb (cpu usage went up to 70% during test)
mysql:            1 proc @ 13Mb (no InnoDB)

? Can blog run on digital ocean?
? How would the blog work for development?

Caching:
https://ghost.org/forum/installation/185-cache-control-header

** -------------- HOME ------------------------------------
** pi - setup raspberry pi backup server
** ansible - manage laura's laptop
** ansible - manage nicole's laptop
** ansible - manage my laptop
** ansible - manage raspbery pi file server
** btsync - setup shared folder for laura and nicole
** minecraft - upgrade for laura and nicole
** pi - setup raspberry pi wifi access point
** pi - setup transparent proxy and add filter
** pi - setup offsite backup
** -------------- SUNDAY ------------------------------------
** TODO pricing - use factory cost spreadsheet for pricing
https://github.com/cgrand/spreadmap/commits/master
(require '[net.cgrand.spreadmap :as evil])
(def m (evil/spreadmap "shelf-price.xls"))
(defn price [depth width num] (-> m (assoc "B2" depth) (assoc "B3" width) (assoc "B4" num) (select-keys ["G2" "G5"])))
(price 30 120 6)
(time (dotimes [i 1] (price 30 120 6)))

locking:  http://clojuredocs.org/clojure_core/1.2.0/clojure.core/locking

- calculate unit price for a single item
- calculate total price for cart
- get rid of old pricing code
? get rid of frinj?
- save commit hash used to generate price

model/from-params
  multi method that creates a component from form parameters
  - tree used to calculate price
model/shelf.clj
model/calc-price
fmt/format-eur
  - assumes frinj units

Shelf Data Model
:id 0,
:type :shelf,
:color {:rgb "#C51D34", :type :ral, :code 3027},
:quantity 1,
:finish :laquer-matte,
:width 120,
:depth 30}
? How does the id get inserted?

*** cleanup
- model goes away
- frinj can probably go away
*** ? what are the other components?
- margin (this is hidden?)
- tax (how do we calculate this?)
- shipping (can we get this from UPS?)
- packaging - box cost

*** ? how do we set price?
  ? what is our target margin? 25%?
  ? how do we ensure similar prices between orders?
    ? do we set a margin per factory or per product?

*** ? how do we handle volume pricing?
*** ? how should it work?
  - pricing fn takes cart as input
    - prices out each item
      - hardcode stephane as factory for now
        - units in metric
        - prices in euros
   - add sistemi markup
     ? how do we set the price to meet target margin?
       ? use 1 factory as a cost reference?
         ? does this mean we need to always price using the most expensive factory?
       ? add our desired margin?
       ? select a user friendly price? e.g, even amount?
   - add shipping
     - get the shipping price from ups
     ? how is tax handled for shipping?
   - add packaging cost
     ? is this another spreadsheet?
   - add tax (on our markup)

** TODO ups - review dave's code and check with him on status
** ----------------------------------------------------------
** TODO productivity - constraints are important for creativity
** TODO creativity - vi hart, clay shirky - why are things interesting?
** TODO productivity - calendar, morning planning
** TODO productivity - sleep, exercise, meditation
peigner la girafe
** TODO finish - what our our finish options and costs?
? do we need laquer matte/satin/glossy or rubio monocoat?
? what about valchromat raw/oiled?
** TODO share remaining items and schedule
? list of items for week?
? update github?
** TODO units - store units w/ order parameters
? investigate minderbender?
** ? should sessions use cookie stores?
- allows server to be restarted
? how can they be validated?
- e.g., items must be valid
** research currency libraries (money)
  money: https://github.com/clojurewerkz/money
    - uses joda money under the hood  
    ? does it support clojurescript?
    - can do formatting
    - has hiccup integration
      ? how to set the locale?
    - has wrong formatting for europe
    - doesn't have formatting for spain
    - no support for cljs
** send dev schedule w/ dates
- payment gateway (stripe)
  - 
- shipping gateway (ups)
  - get price estimate
  - place order
  - get package status
- blog
- user accounts
  - password recovery
  - gravatar
- order status
  - at factory
  - shipping status
- standards/gallery page
- gallery page
  - email integration
    - mailchimp

- datomic
- pedestal
   
** pricing - sync local docs w/ google apps
https://github.com/marianoguerra/google-docs-spreadsheets.clj
? can it be used to export the file?
? can it be used to diff the file?
  - yes

- uses gdata-java-client
spreadsheets api: https://developers.google.com/google-apps/spreadsheets/
- wtf: recommends oauth2 what a pain in the ass
  - requires registering as a google app
  - requires web flow where user is prompted to confirm access
    - still tied to a user account
    - no way to automate

? use jarvis account to sync spreadsheets?

http://hittaruki.info/blog/2013/06/28/clojure-java-interop-and-google-drive-api-part-I/
https://developers.google.com/drive/quickstart-java

WARNING: Application name is not set. Call Builder#setApplicationName.
? do i need a refresh token? Yes
WTF: need to implement a credential store

When you request user permissions, specify "offline=true". This will
("sometimes" sic) return a refreshtoken, which is as good as a
password with restricted permissions. You can store this and reuse it
at any time (until the user revokes it) to fetch an access token. 

My feeling is that the Google APIs are more of a hinderence than a
help. One by one, I've stopped using them and now call the REST API
directly. 

so, fuck documentlist api
  - can't download files
  - is deprecated
so, fuck the java api
  - is shit all around
try, rest
  - http requests
  - json responses
need, a place to store refresh tokens
need, to share files with jarvis for automatic sync
could, redirect to locahost to capture auth code

https://accounts.google.com/o/oauth2/auth?access_type=online&approval_prompt=auto&client_id=825990029377.apps.googleusercontent.com&redirect_uri=urn:ietf:wg:oauth:2.0:oob&response_type=code&scope=https://www.googleapis.com/auth/drive

https://accounts.google.com/o/oauth2/auth
  access_type=offline
  approval_prompt=auto
  client_id=825990029377.apps.googleusercontent.com
  redirect_uri=urn%3Aietf%3Awg%3Aoauth%3A2.0%3Aoob
  reponse_type=code
  scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive

yack shaving
- trying to write a one shot handler
  - need access to the inner loop?

http://localhost:3000/?code=4/6HfOG3junLkOYhzH0sUxPdJNx-u4.gig5ZaXB-MIQshQV0ieZDAoGlWjwgwI


https://accounts.google.com/o/oauth2/auth
  access_type=online
  approval_prompt=auto
  client_id=825990029377.apps.googleusercontent.com
  redirect_uri=urn:ietf:wg:oauth:2.0:oob
  response_type=code
  scope=https://www.googleapis.com/auth/drive

- need ability to build url from base and set of params
- use clojure to launch in web browser
- listen on localhost random port to get response
- call out to google to get and access and refresh code
- store refresh token securely (gpg encrypted and checked in?)
- get access token (as needed) from refresh token


https://accounts.google.com/o/oauth2/auth
  access_type=offline
  approval_prompt=auto
  client_id=825990029377.apps.googleusercontent.com
  redirect_uri=http%3A%2F%2Flocalhost%3A3000
  response_type=code
  scope=https%3A%2F%2Fwww.googleapis.com%2Fauth%2Fdrive"

{:headers
    {"accept" "application/json",
     "content-type" "application/x-www-form-urlencoded"},
body
    code=4%2FZR6zMIaP3ZXSjf-pjVZNYTwsHMXA.onjgSsIojkkVshQV0ieZDAqetsfwgwI
    client_id=825990029377.apps.googleusercontent.com
    client_secret=5FGc3JKhJoHMvfZ4eijAmdTO
    redirect_uri=http%3A%2F%2Flocalhost"
    , :content-type "application/x-www-form-urlencoded", :request-method :post, :url "https://accounts.google.com/o/oauth2/token"}, map__3582 {:orig-content-encoding nil, :trace-redirects ["https://accounts.google.com/o/oauth2/token"], :request-time 1313, :status 400, :headers {"x-xss-protection" "1; mode=block", "server" "GSE", "x-frame-options" "SAMEORIGIN", "alternate-protocol" "443:quic", "content-type" "application/json", "date" "Sun, 27 Oct 2013 05:33:38 GMT", "cache-control" "no-cache, no-store, max-age=0, must-revalidate", "x-content-type-options" "nosniff", "expires" "Fri, 01 Jan 1990 00:00:00 GMT", "pragma" "no-cache", "connection" "close"}, :body "{\n  \"error\" : \"invalid_request\"\n}"}, resp {:orig-content-encoding nil, :trace-redirects ["https://accounts.google.com/o/oauth2/token"], :request-time 1313, :status 400, :headers {"x-xss-protection" "1; mode=block", "server" "GSE", "x-frame-options" "SAMEORIGIN", "alternate-protocol" "443:quic", "content-type" "application/json", "date" "Sun, 27 Oct 2013 05:33:38 GMT", "cache-control" "no-cache, no-store, max-age=0, must-revalidate", "x-content-type-options" "nosniff", "expires" "Fri, 01 Jan 1990 00:00:00 GMT", "pragma" "no-cache", "connection" "close"}, :body "{\n  \"error\" : \"invalid_request\"\n}"}, status 400}}


{:orig-content-encoding nil,
:trace-redirects ["https://accounts.google.com/o/oauth2/token"],
:request-time 1398,
:status 200,
:headers {
    "x-xss-protection" "1;mode=block",
    "server" "GSE",
    "x-frame-options" "SAMEORIGIN",
    "alternate-protocol" "443:quic",
    "content-type" "application/json",
    "date" "Sun, 27 Oct 2013 05:37:21 GMT",
    "cache-control" "no-cache, no-store, max-age=0, must-revalidate",
    "x-content-type-options" "nosniff",
    "expires" "Fri, 01 Jan 1990 00:00:00 GMT",
    "pragma" "no-cache",
    "connection" "close"},
:body

# how to download a file
https://developers.google.com/drive/manage-downloads

:items

:title
:etag
:exportLinks
  :application/x-vnd.oasis.opendocument.spreadsheet

# data log query?


# so, wget works just fine
# ?what kind of transformation is happening?
# - it blows up the size
# ? is one of the middlewares misbehaving?
# clj-http.client/*current-middleware*
#
wget -S "https://docs.google.com/feeds/download/spreadsheets/Export?key=0AsTr1y4ignXldFY2RlJhSmlsVVhNT18tWlA1UHJTTlE&exportFormat=ods&access_token=ya29.AHES6ZR5f0_CWHjZzQfqgxtbMZlHL0LgM7R01G570z_9QR_jiGJsmwA"

(coerce-response-body req resp)


- via australis

** pricing - ability to diff versions of ods
? how to loop over workbooks?
? how to find all cells that have a value?

Note: POI doesn't suppport ods format.
http://apache-poi.1045710.n5.nabble.com/ODS-open-office-file-td5604086.html

If downloading, does it just download the first sheet?
application/vnd.openxmlformats-officedocument.spreadsheetml.sheet

xls files are zips of xml
zipcmp can be used to compare the files in the xml
excel_cmp can be used to compare the contents of the workbooks

? What should the workflow be to incorporate changes?
  - pull changes from google docs
  - run zipcmp to check for changes
    - if no changes
      - reset
    - if changes
      - run excel_cmp to view changes and vett
      - run tests
      - commit      
? Can a custom diff command be specified on the command line?
  git difftool (http://git-scm.com/docs/git-difftool.html)
  configuration
  difftool.<tool>.cmd
  difftool.<tool>.path

  -x <command>
  --extcmd=<command>   # runs command $LOCAL $REMOTE ($BASE is set in environment)

$LOCAL
$REMOTE
$MERGED
$BASE

git difftool -x zipcmp shelf-cost-template-metric.xls

$ git difftool -x zipcmp shelf-cost-template-imperial.xls
--- /tmp/cItLLi_shelf-cost-template-imperial.xls
+++ products/shelf/shelf-cost-template-imperial.xls
-       1923 fefc96fe xl/sharedStrings.xml
+       1931 901bab62 xl/sharedStrings.xml
-      17825 3a4abbef xl/styles.xml
+      20493 c489ee2e xl/styles.xml
+       2444 9e95dae2 xl/worksheets/sheet1.xml
-       2445 ee8671d0 xl/worksheets/sheet1.xml
+      18645 30ddfb6e xl/worksheets/sheet2.xml
-      18703 728042eb xl/worksheets/sheet2.xml


git ls-files -m products

git difftool -x /home/jam.sm/sm/costs/bin/excel_cmp shelf-cost-template-metric.xls

git difftool -x bin/excel_cmp products

lein run pull
  - find modified xls files
  - check them with
lein run push?

? TODO: How to propagate deletes?

BUG: fn concat in google docs should be converted to concatenate when export to xls
FIX: use concatenate instead of concat

{:etag "\"SQFIsIrlQ4j3H07nwR6GyVXbP4s/MTM4MzkyNDU2NTI3OA\"",
 :copyable true, :id "0AsTr1y4ignXldFY2RlJhSmlsVVhNT18tWlA1UHJTTlE", :embedLink "https://docs.google.com/a/sistemimoderni.com/spreadsheet/ccc?key=0AsTr1y4ignXldFY2RlJhSmlsVVhNT18tWlA1UHJTTlE&output=html&chrome=false&widget=true"}

** pricing - ability to diff versions of google docs
** pricing - create simple unit test
** spreadmap - enhance to work with google docs
- difficult since it uses POI
- could use a parallel implementation
- would need to use google auth crap
** pricing - implement discounted pricing for purchases
  - based on number of square meters
  - formula to include a discount for how many meters squared in the order
  - consider heuristics for combining small orders
** --------------------------------------------------
** french clojure developers
http://bzg.fr/about.html
** TODO headshot - send to Eric
team headshots folder
** TODO dommy is not compatible with the latest clojurescript version
colorwheel - color label is no longer in center (after upgrades)
** TODO blog - add news page w/ categories
- can wordpress be transformed
- categories
- comments are important
? ghost?
? boing boing discussion site?

11/15 - 
11/30 - deadline of november
11/30 - done w/ ups
** TODO pinterest - make images compatible
** backup laptop
** work /w Dave on UPS
Could not locate ups_shipping/common__init.class or ups_shipping/common.clj

TODO: suggestion change namespace to shipping/ups
TODO: review dave's code
TODO: setup pairing environment
  ? vpn w/ client to client access?
  ? can it be integrated w/ dns?

TODO: consider using a schema to verify map contents for shipping operations
  https://github.com/runa-dev/clj-schema

? Why are those options so complicated?
  clojure.data.xml returns data as defrecords
  ? why not use sexp-as-element?

parse-str
emit-str

"ONE"
(#clojure.data.xml.Element{:tag :InsuredValue, :attrs {}, :content (
    #clojure.data.xml.Element{:tag :CurrencyCode, :attrs {}, :content ("EUR")}
    #clojure.data.xml.Element{:tag :MonetaryValue, :attrs{}, :content ("50.00")})}
 #clojure.data.xml.Element{:tag :VerbalConfirmation, :attrs {}, :content (
    #clojure.data.xml.Element{:tag :Name, :attrs {}, :content ("Eric Romeo")}
    #clojure.data.xml.Element{:tag :PhoneNumber, :attrs {}, :content ("123456777")})})

"TWO"
"<?xml version=\"1.0\" encoding=\"UTF-8\"?>
<InsuredValue>
  <CurrencyCode>EUR</CurrencyCode>
  <MonetaryValue>50.00</MonetaryValue>
</InsuredValue>
<VerbalConfirmation>
  <Name>Eric Romeo</Name>
  <PhoneNumber>123456777</PhoneNumber>
</VerbalConfirmation>"

** setup paring environment on c2
- emacs
- leiningen
- git
- emacs - enable lein numbers
- tmux
** spreadsheet tweaks
+ ? does google support export?
  - YES: xls and ods
+ naming/folder/tag conventions for google docs
+ imperial units
+ calculate price
+ make it pretty
+ list costs in manufacture order
- materials sheet
  ? pull in material prices from web?
  - daemon could query for and insert prices and source link
- other notes/guidelines
? notes in spread sheets?
? notes to team? 
? guidelines at top level?
- cron job to export google docs to git area
  - test
  - commit
  - email cell diffs
product-cost-factory
shelf-cost-alan
shelf-cost-nathaniel


costs/         (one sub directory per product)
 bookcase/       (tbd; no files at the moment)
 shelf/
   shelf-cost-template-metric     ()
   shelf-cost-template-imperial   ()
   
** tooling - nrepl is now cider
** tooling - review emacs article
http://zeekat.nl/articles/making-emacs-work-for-me.html#sec-1
** cart - ? display estimated delivery date?
? are we saying 3 weeks?

** research - use simple-check for testing
** research - try lein-difftest
https://github.com/brentonashworth/lein-difftest#readme
** refactor - remove paypal
** refactor - remove fidjet
** refactor - rip out old pricing code
? do we still need frinj?
** refactor - use cljx for clj/cljs code sharing
** refactor - rename shelving to bookcase
** refactor - don't rely on foreman
** refactor - use timbre for logging
** refactor - log in edn

** refactor - rewrite using pedestal
** refactor - translation - use tower library
? contribute clojurescript version?
** refactor - translation - allow use of dict vars
** website - csrf protection
http://nelsonmorris.net/2013/10/15/csrf-protection-in-ring.html
** alan fab - insert custom header in sbp code
jean marie -
  - outputting files for Alan's ShopBot
  - ShobBot uses a language called SBP

shopbot
  - has a converter that converts gcode into sbp
    - doesn't have the custom header that alan would have in his shop

? can we auto run it through the converter?
? can we apply a custom header?

? what does he use the header for?
  - his header is in sbp

http://www.opensbp.com/

---------------------------------------------------------------
'SampleToolPath12inchCircle
'File created: Wednesday, October 09, 2013 - 04:34 PM
'SHOPBOT FILE IN INCHES
IF %(25)=1 THEN GOTO UNIT_ERROR	'check to see software is set to standard
C#,90				 	'Lookup offset values
'
'Turning router ON
SO,1,1
PAUSE 2
'
'
'Toolpath Name = Profile 1
'Tool Name   = End Mill (0.25 inch)
---------------------------------------------------------------

- we output gcode
- run it through the shopbot sbp converter
- prepend factory/machine specific header

- control software
  - convert gcode to opensbp
  - we might be able to nest our parts onto a sheet
    - layout cuts to minimize loss
** review d3 and c2 data visualizations
** review - other color wheel (d3)
http://www.jasondavies.com/coffee-wheel/
** pantone color wheel
http://xliberation.com/parse/colortable/parsed3.html
** privacy and analytics

What would our privacy and tracking policy look like?
- motivation and philosophy
  - clean up the web
    - store minimal info
    - minimize 3rd party tracking
      (neuter social share buttons)
  - be transparent
  - be secure
  - allow user to be in control (where possible)
  - privacy audits as part of regular testing
- https only
- only collect minimum information
- only store information as long as necessary
- maintain proper security to prevent unauthorized access
- in house web tracking (to avoid social network tracking)
- no federated logins
- references
  - schneier: https://www.schneier.com/blog/archives/2013/03/changes_to_the.html
    - SocialSharePrivacy: https://github.com/panzi/SocialSharePrivacy
    - https://news.ycombinator.com/item?id=5425713
  - http://mmt.me.uk/blog/2010/07/30/the-facebook-like-button/
- use duckduckgo for search instead of google
  - or in house search
- self host blog
- programs to ensure security of SSL cert (EFF, Moxie Marlinkspike)
- minimize use of 3rd party js on site (reduced csrf attack surface)
- buttons that don't track
  - may be a violation of facebook/google terms (probably worth the risk though)
- cookie auditing w/ explanation of each cookie
- no user agent fingerprinting
- no flash
- explanation of any local storage used
- display details on account page
  - cookies
  - local storage (if any)
  - profile data (e.g., personal data, payment data)
  - order history
  - communications

? Monitoring Questions?
  ? how many people are on the site?
  ? how long are they staying?
  ? what are they doing on the site?
    ? which products are being viewed?
    ? which parameters are being tweaked?
  ? where are they coming from?
  ? what language are they using?
  ? which reports would we want to see daily, weekly, monthly, quarterly?
? Fulfillment?
  ? Factories?
  ? Shipping?
? Accounting?


! we need to separate language from money!
  - e.g., english user in france

? Is there a way to generate google analytics type views from your own hosted data and services?
  - riemann
    -> opentsdb: http://opentsdb.net/
    -> graphite
    -> librato metrics (https://metrics.librato.com/pricing)

? Is there a way to store data (e.g., email addresses) such that we can never share it?
  - really should be a cloud service or even better a p2p encrypted storage
    - introduce a level of indirection for access
      - limited lifetime
      - access control
      - track access
        - unique key/watermark per access
- funny as it is sort of reverse drm
? is there a way to allow operations on private data without revealing the data?
  ? execution sandbox?
    - runs externally supplied functions
    - generates data that stays in the sandbox
    - individual audits any data that exits
      - anonamize if possible
      - return random handle to result for future processing
        - data never leaves      
        ? is this like a huge monad?
        ? how do you prove that a calculation was executed without exposing data?
? third party anonimization service to release clean data?

** TODO jon - for tuesday, plan for launch
- technical details
- timeline
- by thanksgiving?
** TODO jon - set deadlines for self
** TODO jon - get deadline from dave
- break ups items into subtasks
  - get shipping estimate for order
  -
  - (low) add order status to website

margin 20-25% minimum


- delivery dates will be weekly from each factory

Shipping:
1 week to fabricate
1 week to finish
  - oiling and raw are faster
1 week for delivery
  - 2 days for delivery

- one week before order status is ready
- delivery in 3 weeks

? how do people check the status of their order?

** TODO jon - review github tickets
** TODO jon - create template spreadsheets
order info | cost calculations

? should we enforce a units column? YES
? should the inputs/outputs be on 1 sheet? YES
? should we enforce a single workbook per product? YES

Shelf

Inputs (Order Parameters)

? How does raw/oiled/laquered translate to stephane's spreadsheet?
  ? is the laquer rubio monocoat?
  ? is the oiling cost included anywhere?
  ? for laquered material, is valchromat used?

? How can translations be handled?
  - total area
    - ? is this best left to incanter style queries?
    - the data still needs to be extracted

? Should it include tax? NO
  - france - before tax
  - california?
? Should it include the factory's margin?
? What kind of questions will be asked for analysis?
  ? cost percentages?
    - material (used, loss)
    - wages
    - fixed costs
  ? volume pricing?

- should have quantity (for now; to allow factories to set their own
  volume pricing per order)

Problems
? how to determine how many sheets of valchromat are used?
  ? algorithms to plan cuts to minimize loss?

Guidelines:
- Show units for all numbers.
  - SI Usage
  - http://lamar.colostate.edu/~hillger/correct.htm
- Don't hardcode numbers into formulas.
  - Every number should have it's own line item to make it clear what it is.
  - exception: unit conversions

** research - generative testing
** website - bookcase page doesn't have add to cart button
** website - single shelf page doesn't have button to change background color
** research - cemerick/url cross platform clj/cljs url handling
https://github.com/cemerick/url
** research - davidsantiago/pathetic
https://github.com/davidsantiago/pathetic

** research - web ui automated testing
http://nelsonmorris.net/2013/10/14/using-jetty-for-testing-clojure-web-apps.html
** emacs - learn magit
https://github.com/magit/git-modes
** emacs - review better-defaults.el
https://github.com/technomancy/better-defaults/blob/master/better-defaults.el
** leiningen - tune jvm opts for performance
http://www.learningclojure.com/2013/10/efficiency-and-progress-iv-avoiding.html
** ops - re-arrange git repos (no need for top level one)
** ops - vagrant dev image
** ops - staging site
  - secret key should not have to be loaded in gpg agent manually
  - .gnupg dir needs 0700 mode
  - install as a service
  - run as user/group sm-www
  ? use ansible to push deployments?
    - does it support branches?
    - run in local mode to fix perms? or just use a shell script pull hook?
  - use production and staging branches

** website - admin interface
** pricing - display pricing on design page
** website - simple checkout flow
eric would like to call the initial users
  - require phone number
** website - order status
    1) account login (future)
    2) shortcut link from email
    3) combo of email address and zipcode
** website - bookcase page - italian,french - dropdown for dimensions is too long
** website - shelf page - finish dropdown - lengthen dropdown menu for laquer matte
** website - careers page
http://www.codinghorror.com/blog/2012/03/how-to-hire-a-programmer.html
** website - add search
** website, design page - make click to drag more obvious
beatrice
  - click and drag the shelves
    - when the mouse, drags over the shelf window? it turns into an
      icon like the orbit
  ? move the "click to drag" message to the top?
  ? orbit icon?
  ? change mouse to orbit icon on mouseover?
  ? self animate to indicate that it can spin?
  ? play pause icon?
  - should work on both
** website - prototype single page app using pedestal
http://pedestal.io/
** website - pro interface
- exclusive designs
http://www.fermobusa.com/to-the-trade/trade-application
http://www.zanotta.it/#/en/
- collect info
- create user
- can get trade discounts
- accounting

** feedback - spam mitigation
  - http://www.sitepoint.com/captcha-alternatives/
  - https://github.com/itang/clj-captcha
  - track timing of input
    - note, may fail if browser fills out standard form fields
  - add hidden honeypot field
  - server side spam checking
  - check for valid HTTP_REFERER (and possibly USER_AGENT)
  - have javacript checksum fields and autofill a checksum hidden field
  ? how to defeat humans?

** order - order confirmation email
  - with shortcut link to order status

** order - referral code
** customer service - create a faq
** assembly instructions - add generic instructions to website
** assembly instructions - create customized instructions based on order
** assembly instructions - create explodable iteractive instrutions
** datomic - orders
** website - user accounts
** website - contact us page
** website - spanish translations
** research - servant library for web workers
http://marcopolo.io/2013/10/01/servant-cljs.html
** marketing - blog
http://ghost.org

** marketing - privacy
http://www.schneier.com/blog/archives/2013/03/changes_to_the.html
** marketing - googlebot & keywords
** marketing - pinterest
** marketing - twitter
** marketing - google analytics
** usability - a/b testing
** datomic - user accounts
** datomic - frinj integration
- frinj w/ datomic: https://gist.github.com/1980351
** datomic - try datomicism: https://github.com/shaunxcode/datomicism

** feedback, colorwheel - hard to select black or white
eric's sister in-law
** clojure - try pedestal
** clojure - try piggieback
https://github.com/cemerick/piggieback
** clojure - try clojurescript.test
   https://github.com/cemerick/clojurescript.test
** clojure - try austin (easy cljs repl)
https://github.com/cemerick/austin
** clojure - try typed clojure
** clojure - try schemas
- https://github.com/fogus/trammel
- http://blog.getprismatic.com/blog/2013/9/4/schema-for-clojurescript-data-shape-declaration-and-validation
- https://github.com/runa-dev/clj-schema
** clojure - try exploding-fish for url handling
https://github.com/wtetzner/exploding-fish
** clojure - try nipping as reader replacement
https://github.com/ptaoussanis/nippy/blob/master/src/taoensso/nippy/encryption.clj
** clojure - try validations
http://clojurevalidations.info/
** testing - get cloverage working
** ops - ansible deployments
** ops - CI server
** ops - vpn
openvpn
freelan
** ops - gitlab
** ops - riemann
** ops - tarsnap
** ops - syslog
** ops - docker
** ops - btsync server
** ops - vagrant dev vm
** ops - pki
** ops - noc
** ops - graphite
** ops - dns for c1.sm1.in
** ops - scaling plan
** ops - tarsnap
** ops - sync org docs with searchable online wiki
** ops - monitoring
** ops - deployment diagram
** ops - firewall
** ops - hids
fail2ban
ossce
** sharing - open harpocrates
** sharing - open upu
** sharing - open datomic free
** refactor - see if there are any good money libraries
Money: http://blog.clojurewerkz.org/blog/2013/08/22/money-1-dot-4-0-is-released/
** refactor - see if there are any good localization libraries
** refactor - clojurescript modules
Break clojurescript js code into parts.
  https://groups.google.com/forum/#!topic/clojurescript/PNlFCl_kwZY
  http://www.mail-archive.com/clojure@googlegroups.com/msg73452.html
** refactor - use timbre for logging
  ? Does it support thread local context? no, but it does using
    bindings for some stuff.
  ? What is the right approach?
    - store thread context as a map (cdata)
    - provide with-cdata macro
    - update formatter to handle insertion of map as edn
    ? should it be done as middleware? (see end of timber.clj)
  ? can it log in edn?
  ? what would an edn based log look like?
    - timestamp
    - level
    - source
      - host
      - service
      - service boot-id
      - namespace
    - context data
    - data
  ? riemann appender?
  ? datomic appender?
  ? compressed format for readability?
** refactor - should :sistemi.form/{ovale,semplice,quadro} be in a different namespace?
  ? how would this work with datomic?
  ? how would this work with clojurescript?
    - avoid converting enum values with javascript
** refactor - use edn with safe reader for configuration
** update - jquery 2.0
** update - three.js
** update - bootstra
** marketing - write tech blog articles
* MEETINGS
** 2013
*** 11
**** 12
? antoinne is waiting to hear about the team itself?

strict square meter cost for laquering
  - calculated surface area both sides
  - don't subtract cutouts

- work w/ dave

- read eric's blog work

**** 08
eric new laquerer
  - 
limitation of the factory
  - simple software to visualize in 3d
  - technician on the floor
  - output pdfs of drawings in plan and isometric view

- we post text and photos
- others comment
- categories of articles
- front/summary page
- integrated google analytics
- multiple languages

clojure blog examples:
  - https://github.com/ibdknox/Noir-blog/tree/master/src/noir_blog
  - http://ndpar.blogspot.com/2012/11/simple-web-application-in-clojure.html

gravatar

250 word inspiration

**** 01
- TODO: 1 - create launch schedule
- TODO: 2 - getting the blog up and running
- TODO: 2 - read marketing materials
- read article - where are we today (from sep 30th / marketing folder)
- black and white self portrait
  - use format that einat has
    - http://www.mpfp.com/principals/grinbaum.shtml
- mail from einat about dwell to team did not get delivered to eric or antoine
  ? are they logging in to their sistemi account?
  ? is it in their spam folder? in either account?
- dwell.com is cool
- eric can't use google docs as he has to log in to his other email
- TODO: create a word cloud
  - simple
  - decomplect
  - desgin
  - clojure
- facebook groups
  ? find an alternative to facebook groups?
  ? wordpress?

*** 10
**** 25
Dave: Finishing writing a ups request w/ unit tests.
Eric: Work on exporting models from 3DS to Three.js.
Jon: Find spreadsheet to figure out weight.
Jon: Read Eric's stuff in Marketing folder.
  - personalized letters
  - work on developing our networks

Select a Blogging Platform
edit profile
signature
tumblr
wordpress versus ghost

Shelves:
  - Max length will be 220cm. To keep it in the cheaper UPS shipping cost.
  ? Should we integrate UPS cost structure?

There is a maximum weight of 70kg per box.

We need an algorithm to figure out how many boxes to ship the package in.
We need an algorithm to figure out how much a box weighs and what the dimensions are.

Boxes:
  - width: fixed
  - depth: fixed
  - length: the length changes

Renner.cl - order 

**** 22
- development schedule for Antione
- spreadsheet - volume pricing curve
- spreadsheet - bookcase template
 
- do something even more like dropbox
  - customer code to beta testers
    - both parties get a discount (~10EUR)

? 15% for professional discount?

- check if einat is allowed to change/view spreadsheet stuff
- check how things work in newer IEs
- get in touch with chris
  - eric will be in CA
**** 18

How do we monitor brand status?
? what are the search rankings?
? how do we monitor pinterest/facebook/twitter activity?
? how many visits does the site get?
  ? where do they come from?
  ? how long are they on the site?
  ? how do they spend their time on the site?
? how to we a/b test new features?

? offerpop?
? podcast?
? each team member should contribute to the blog?

anaylitics section
privacy and tracking


publish to multiple social networks w/ a consistent theme
  - http://www.scoop.it/pricing

- pdf and cad files are necessary for designers
**** 11

**** 08
Antoine - dave intro
  masscomm 3 yrs 2 in france 1 in spain
  chemistry
  internship in New Orleans
- has an intern
- works in social media

JON: Review github.

**** 04
Eric
  - had a conversation with Nathaniel Taylor (from Radio Robot).
    http://www.radiorobot.com/
  - will have Stephane make the bit.

Einat
  - Spoke with Adele (who was sick)
Eric
  - will meet with a young german guy that he met at the stanford workshop

Stripe
  ? Can we do a payment through the web ui (from California)?

Github
Jon - Review GitHub Issues
